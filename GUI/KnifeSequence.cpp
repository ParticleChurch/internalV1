#include "KnifeSequence.hpp"

Skins::Sequence::Generic Skins::Sequence::SequenceGroup1[] = {
	Generic::Draw,			  // 0
	Generic::Draw,			  // 1
	Generic::Idle,			  // 2
	Generic::Idle,			  // 3
	Generic::LightMiss,		  // 4
	Generic::LightMiss,		  // 5
	Generic::LightHit,		  // 6
	Generic::LightHit,		  // 7
	Generic::LightBackstab,	  // 8
	Generic::LightBackstab,	  // 9
	Generic::HeavyMiss,		  // 10
	Generic::HeavyHit,		  // 11
	Generic::HeavyBackstab,	  // 12
	Generic::Inspect,		  // 13
	Generic::Inspect,		  // 14
};							   

Skins::Sequence::Generic Skins::Sequence::SequenceGroup2[] = {
	Generic::Draw,            // 0
	Generic::Idle,			  // 1
	Generic::Idle,			  // 2
	Generic::LightMiss,		  // 3
	Generic::LightMiss,		  // 4
	Generic::LightHit,		  // 5
	Generic::LightHit,		  // 6
	Generic::LightBackstab,	  // 7
	Generic::LightBackstab,	  // 8
	Generic::HeavyMiss,		  // 9
	Generic::HeavyHit,		  // 10
	Generic::HeavyBackstab,	  // 11
	Generic::Inspect,		  // 12
	Generic::Unknown,		  // 13
	Generic::Unknown,		  // 14
	Generic::Inspect,		  // 15
};

Skins::Sequence::Generic Skins::Sequence::SequenceGroup3[] = {
	Generic::Draw,			  // 0
	Generic::Idle,			  // 1
	Generic::LightMiss,		  // 2
	Generic::LightMiss,		  // 3
	Generic::LightHit,		  // 4
	Generic::LightHit,		  // 5
	Generic::LightBackstab,	  // 6
	Generic::LightBackstab,	  // 7
	Generic::HeavyMiss,		  // 8
	Generic::HeavyHit,		  // 9
	Generic::HeavyBackstab,	  // 10
	Generic::Inspect,		  // 11
};

Skins::Sequence::Generic Skins::Sequence::SequenceGroup4[] = {
	Generic::Draw,			  // 0
	Generic::Draw,			  // 1
	Generic::Idle,		      // 2
	Generic::Idle,		      // 3
	Generic::LightMiss,		  // 4
	Generic::LightMiss,		  // 5
	Generic::LightHit,		  // 6
	Generic::LightHit,		  // 7
	Generic::LightBackstab,	  // 8
	Generic::LightBackstab,	  // 9
	Generic::HeavyMiss,		  // 10
	Generic::HeavyHit,		  // 11
	Generic::HeavyBackstab,	  // 12
	Generic::Inspect,		  // 13
	Generic::Inspect,		  // 14
	Generic::Inspect,		  // 15
};

Skins::Sequence::Generic Skins::Sequence::SequenceGroup5[] = {
	Generic::Draw,			  // 0
	Generic::Idle,		      // 1
	Generic::LightMiss,		  // 2
	Generic::LightMiss,		  // 3
	Generic::LightHit,		  // 4
	Generic::LightHit,		  // 5
	Generic::LightBackstab,	  // 6
	Generic::LightBackstab,	  // 7
	Generic::HeavyMiss,		  // 8
	Generic::HeavyMiss,		  // 9
	Generic::HeavyHit,		  // 10
	Generic::HeavyBackstab,	  // 11
	Generic::Inspect,		  // 12
	Generic::Inspect,		  // 13
};

Skins::Sequence::Generic Skins::Sequence::SequenceGroup6[] = {
	Generic::Draw,			  // 0
	Generic::Idle,		      // 1
	Generic::Idle,		      // 2
	Generic::LightMiss,		  // 3
	Generic::LightMiss,		  // 4
	Generic::LightHit,		  // 5
	Generic::LightHit,		  // 6
	Generic::LightBackstab,	  // 7
	Generic::LightBackstab,	  // 8
	Generic::HeavyMiss,		  // 9
	Generic::HeavyHit,		  // 10
	Generic::HeavyBackstab,	  // 11
	Generic::Inspect,		  // 12
};

Skins::Sequence::Generic Skins::Sequence::SequenceGroup7[] = {
	Generic::Draw,			  // 0
	Generic::Idle,		      // 1
	Generic::LightMiss,		  // 2
	Generic::LightMiss,		  // 3
	Generic::LightMiss,		  // 4
	Generic::LightMiss,		  // 5
	Generic::LightMiss,		  // 6
	Generic::LightHit,		  // 7
	Generic::LightHit,		  // 8
	Generic::LightBackstab,	  // 9
	Generic::LightBackstab,	  // 10
	Generic::HeavyMiss,		  // 11
	Generic::HeavyMiss,		  // 12
	Generic::HeavyHit,		  // 13
	Generic::HeavyBackstab,	  // 14
	Generic::Inspect,		  // 15
};

Skins::Sequence::Generic Skins::Sequence::SequenceGroup8[] = {
	Generic::Draw,			  // 0
	Generic::Idle,		      // 1
	Generic::Idle,		      // 2
	Generic::LightMiss,		  // 3
	Generic::LightMiss,		  // 4
	Generic::LightHit,		  // 5
	Generic::LightHit,		  // 6
	Generic::LightBackstab,	  // 7
	Generic::LightBackstab,	  // 8
	Generic::HeavyMiss,		  // 9
	Generic::HeavyHit,		  // 10
	Generic::HeavyBackstab,	  // 11
	Generic::Inspect,		  // 12
	Generic::Inspect,		  // 13
};

Skins::Sequence::Generic Skins::Sequence::SequenceGroup9[] = {
	Generic::Draw,			  // 0
	Generic::Idle,		      // 1
	Generic::Idle,		      // 2
	Generic::LightMiss,		  // 3
	Generic::LightMiss,		  // 4
	Generic::LightHit,		  // 5
	Generic::LightHit,		  // 6
	Generic::LightBackstab,	  // 7
	Generic::LightBackstab,	  // 8
	Generic::HeavyMiss,		  // 9
	Generic::HeavyHit,		  // 10
	Generic::HeavyBackstab,	  // 11
	Generic::Unknown,		  // 12
	Generic::Unknown,		  // 13
	Generic::Inspect,		  // 14
	Generic::Inspect,		  // 15
};

// random on range [a, b] inclusive
#ifdef inclusive_random
#error bro you gotta rename this function
#endif
#define inclusive_random(a,b) ((a) + rand() % (((b)-(a)) + 1))
namespace Skins				  
{							  
	namespace Sequence
	{
		Generic* Nomad         = SequenceGroup1;
		Generic* Skeleton      = SequenceGroup1;
		Generic* Survival      = SequenceGroup1;
		Generic* Paracord      = SequenceGroup1;
		Generic* Classic       = SequenceGroup2;
		Generic* Bowie         = SequenceGroup3;
		Generic* Butterfly     = SequenceGroup4;
		Generic* Falchion      = SequenceGroup5;
		Generic* Flip          = SequenceGroup6;
		Generic* Gut           = SequenceGroup6;
		Generic* Huntsman      = SequenceGroup6; // could be wrong, based entirely off of: https://www.youtube.com/watch?v=dlB5-1WxyzU
		Generic* Karambit      = SequenceGroup6;
		Generic* Bayonet       = SequenceGroup6;
		Generic* M9Bayonet	   = SequenceGroup6;
		Generic* Navaja		   = SequenceGroup6;
		Generic* ShadowDaggers = SequenceGroup7;
		Generic* Stiletto	   = SequenceGroup8;
		Generic* Talon		   = SequenceGroup9;
		Generic* Ursus		   = SequenceGroup1;
		Generic* TDefault	   = SequenceGroup6;
		Generic* CTDefault	   = SequenceGroup6;

		int GetSequenceFromGeneric(Generic seq, int GroupNumber)
		{
			/* copy/paste
				switch (GroupNumber)
				{
				case 1:
				case 2:
				case 3:
				case 4:
				case 5:
				case 6:
				case 7:
				case 8:
				case 9:
				}
				break;
			*/
			switch (seq)
			{
			case Generic::Draw:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return inclusive_random(0,1);
				case 2:
				case 3:
				case 5:
				case 6:
				case 7:
				case 8:
				case 9:
					return 0;
				}
				break;
			case Generic::Idle:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return inclusive_random(2, 3);
				case 2:
				case 6:
				case 8:
				case 9:
					return inclusive_random(1, 2);
				case 3:
				case 5:
				case 7:
					return 1;
				}
				break;
			case Generic::LightMiss:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return inclusive_random(4, 5);
				case 2:
				case 6:
				case 8:
				case 9:
					return inclusive_random(3, 4);
				case 3:
				case 5:
					return inclusive_random(2, 3);
				case 7:
					return inclusive_random(2, 6);
				}
				break;
			case Generic::LightHit:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return inclusive_random(6, 7);
				case 2:
				case 6:
				case 8:
				case 9:
					return inclusive_random(5, 6);
				case 3:
				case 5:
					return inclusive_random(4, 5);
				case 7:
					return inclusive_random(7, 8);
				}
				break;
			case Generic::LightBackstab:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return inclusive_random(8, 9);
				case 2:
				case 6:
				case 8:
				case 9:
					return inclusive_random(7, 8);
				case 3:
				case 5:
					return inclusive_random(6, 7);
				case 7:
					return inclusive_random(9, 10);
				}
				break;
			case Generic::HeavyMiss:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return 10;
				case 2:
				case 6:
				case 8:
				case 9:
					return 9;
				case 3:
					return 8;
				case 5:
					return inclusive_random(8, 9);
				case 7:
					return inclusive_random(11, 12);
				}
				break;
			case Generic::HeavyHit:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return 11;
				case 2:
				case 5:
				case 6:
				case 8:
				case 9:
					return 10;
				case 3:
					return 9;
				case 7:
					return 13;
				}
				break;
			case Generic::HeavyBackstab:
				switch (GroupNumber)
				{
				case 1:
				case 4:
					return 12;
				case 2:
				case 5:
				case 6:
				case 8:
				case 9:
					return 11;
				case 3:
					return 10;
				case 7:
					return 14;
				}
				break;
			case Generic::Inspect:
				switch (GroupNumber)
				{
				case 1:
					return inclusive_random(13, 14);
				case 2:
					if (rand() & 1)
						return 12;
					else
						return 15;
				case 3:
					return 11;
				case 4:
					return inclusive_random(13, 15);
				case 5:
				case 8:
					return inclusive_random(12, 13);
				case 6:
					return 12;
				case 7:
					return 15;
				case 9:
					return inclusive_random(14, 15);
				}
				break;
			}
			return -1;
		}
	}
}
#undef inclusive_random